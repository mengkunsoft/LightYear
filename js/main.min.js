/**
 * ViewImage.js
 * https://tokinx.github.io/view-image
 */
!function(a){a.extend({viewImage:function(b){var c=a.extend({target:".view-image img",exclude:"",delay:300},b);a(c.exclude).attr("view-image",!1),a(c.target).click(function(){var b=a(this).attr("src"),d=a(this).attr("href"),e="",f="<style class='view-image-css'>.view-img{position:fixed;background:#fff;background:rgba(255,255,255,.92);width:100%;height:100%;top:0;left:0;text-align:center;padding:2%;z-index:999;cursor: zoom-out}.view-img img,.view-img span{max-width:100%;max-height:100%;position:relative;top:50%;transform: translateY(-50%);}.view-img img{animation:view-img-show .8s -0.1s ease-in-out}.view-img span{height:2em;color:#AAB2BD;overflow:hidden;position:absolute;top:50%;left:0;right:0;width:120px;text-align:center;margin:-1em auto;}.view-img span:after{content:'';position:absolute;bottom:0;left:0;transform: translateX(-100%);width:100%;height:2px;background:#3274ff;animation:view-img-load .8s -0.1s ease-in-out infinite;}@keyframes view-img-load{0%{transform: translateX(-100%);}100%{transform: translateX(100%);}}@keyframes view-img-show{0%{opacity:0;}100%{opacity:1;}}</style>";return a(this).attr("view-image")||a(this).attr("rel")?void 0:(e=b?b:d,a("body").append(f+"<div class='view-img'><span>Loading...</span></div>"),setTimeout(function(){var b=new Image;b.src=e,b.onload=function(){a(".view-img").html("<img src="+this.src+">")},a(".view-img").click(function(){a(".view-image-css").remove(),a(this).remove()})},c.delay),!1)})}})}(jQuery);


;(function($) {
    /* 图片灯箱 */ 
    $("a[href*='.jpg'],a[href*='.png'],a[href*='.gif'],a[href*='.jpeg'],a[href*='.webp']").each(function() {
        try {
            var pUrl = $(this).attr("href").split('?')[0];
            /* 为图片加上灯箱 */ 
            if(pUrl.endsWith(".jpg") || pUrl.endsWith(".png") || pUrl.endsWith(".gif") || pUrl.endsWith(".jpeg") || pUrl.endsWith(".webp")) {
                if(!$(this).hasClass("view-image") && !$(this).attr("download")) {
                    /* 没有加上新窗口打开，并且下级还有图片 */ 
                    if(($(this).attr("target") != "_blank") || ($(this).find("img").length !== 0)) {
                        $(this).addClass('view-image');
                    }
                }
            }
        } catch (e) {
            console.log(e.name + "[图片灯箱]: " + e.message);
        }
    });
    
    /* 灯箱初始化 */ 
    $.viewImage({
        'target' : '.view-image',   /* 需要使用ViewImage的图片 */
        'exclude': '.no-light-box', /* 要排除的图片 */
        'delay'  : 300              /* 延迟时间 */
    });
    
    /* 代码高亮 */ 
    hljs.initHighlightingOnLoad();
    
    // 导航切换
    $('body').on('click', '.lyear-hamburger', function(){
		$(this).toggleClass("is-active");
	});
  
    // 评论留言
    $('.reply-btn').on('click', function(){
        var parentLi    = $(this).parents('li').first(),
            parentID    = $(this).data('id'),
            respond     = $('#respond'),
            respondHtml = respond.prop("outerHTML");
        
        $("#respond").remove();
        parentLi.after(respondHtml);
        $("#comment_parent").val(parentID);
        $('.cancel-comment-reply').show();
    });
})(jQuery);

function cancelReply() {
    var respond     = $('#respond'),
        respondHtml = respond.prop("outerHTML");

    respond.remove();
    $('.lyear-comment').after(respondHtml);
    $("#comment_parent").val('0');
    $('.cancel-comment-reply').hide();
}